/* cleanup.c generated by valac 0.34.8, the Vala compiler
 * generated from cleanup.vala, do not modify */

/* Copyright 2017 Siddhartha Das (bablu.boy@gmail.com)
*
* This file is part of Bookworm and will be used to clean up
* cache data for extracted contents of books and cover images
*
* Bookworm is free software: you can redistribute it
* and/or modify it under the terms of the GNU General Public License as
* published by the Free Software Foundation, either version 3 of the
* License, or (at your option) any later version.
*
* Bookworm is distributed in the hope that it will be
* useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
* Public License for more details.
*
* You should have received a copy of the GNU General Public License along
* with Bookworm. If not, see http://www.gnu.org/licenses/.
*/

#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gee.h>
#include <gobject/gvaluecollector.h>


#define BOOKWORM_APP_TYPE_CLEANUP (bookworm_app_cleanup_get_type ())
#define BOOKWORM_APP_CLEANUP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOOKWORM_APP_TYPE_CLEANUP, BookwormAppCleanup))
#define BOOKWORM_APP_CLEANUP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOOKWORM_APP_TYPE_CLEANUP, BookwormAppCleanupClass))
#define BOOKWORM_APP_IS_CLEANUP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOOKWORM_APP_TYPE_CLEANUP))
#define BOOKWORM_APP_IS_CLEANUP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOOKWORM_APP_TYPE_CLEANUP))
#define BOOKWORM_APP_CLEANUP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOOKWORM_APP_TYPE_CLEANUP, BookwormAppCleanupClass))

typedef struct _BookwormAppCleanup BookwormAppCleanup;
typedef struct _BookwormAppCleanupClass BookwormAppCleanupClass;
typedef struct _BookwormAppCleanupPrivate BookwormAppCleanupPrivate;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define BOOKWORM_APP_TYPE_BOOK (bookworm_app_book_get_type ())
#define BOOKWORM_APP_BOOK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), BOOKWORM_APP_TYPE_BOOK, BookwormAppBook))
#define BOOKWORM_APP_BOOK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), BOOKWORM_APP_TYPE_BOOK, BookwormAppBookClass))
#define BOOKWORM_APP_IS_BOOK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), BOOKWORM_APP_TYPE_BOOK))
#define BOOKWORM_APP_IS_BOOK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), BOOKWORM_APP_TYPE_BOOK))
#define BOOKWORM_APP_BOOK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), BOOKWORM_APP_TYPE_BOOK, BookwormAppBookClass))

typedef struct _BookwormAppBook BookwormAppBook;
typedef struct _BookwormAppBookClass BookwormAppBookClass;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _bookworm_app_book_unref0(var) ((var == NULL) ? NULL : (var = (bookworm_app_book_unref (var), NULL)))
typedef struct _BookwormAppParamSpecCleanup BookwormAppParamSpecCleanup;

struct _BookwormAppCleanup {
	GTypeInstance parent_instance;
	volatile int ref_count;
	BookwormAppCleanupPrivate * priv;
};

struct _BookwormAppCleanupClass {
	GTypeClass parent_class;
	void (*finalize) (BookwormAppCleanup *self);
};

struct _BookwormAppParamSpecCleanup {
	GParamSpec parent_instance;
};


static gpointer bookworm_app_cleanup_parent_class = NULL;
extern gchar* bookworm_app_bookworm_bookworm_config_path;
extern GeeHashMap* bookworm_app_bookworm_libraryViewMap;

gpointer bookworm_app_cleanup_ref (gpointer instance);
void bookworm_app_cleanup_unref (gpointer instance);
GParamSpec* bookworm_app_param_spec_cleanup (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void bookworm_app_value_set_cleanup (GValue* value, gpointer v_object);
void bookworm_app_value_take_cleanup (GValue* value, gpointer v_object);
gpointer bookworm_app_value_get_cleanup (const GValue* value);
GType bookworm_app_cleanup_get_type (void) G_GNUC_CONST;
enum  {
	BOOKWORM_APP_CLEANUP_DUMMY_PROPERTY
};
void bookworm_app_cleanup_cleanUp (void);
void bookworm_app_cleanup_cleanBookCacheContent (void);
void bookworm_app_cleanup_cleanBookCoverImages (void);
gchar* bookworm_app_utils_execute_sync_command (const gchar* cmd);
gpointer bookworm_app_book_ref (gpointer instance);
void bookworm_app_book_unref (gpointer instance);
GParamSpec* bookworm_app_param_spec_book (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags);
void bookworm_app_value_set_book (GValue* value, gpointer v_object);
void bookworm_app_value_take_book (GValue* value, gpointer v_object);
gpointer bookworm_app_value_get_book (const GValue* value);
GType bookworm_app_book_get_type (void) G_GNUC_CONST;
gchar* bookworm_app_book_getBookExtractionLocation (BookwormAppBook* self);
gchar* bookworm_app_book_getBookCoverLocation (BookwormAppBook* self);
BookwormAppCleanup* bookworm_app_cleanup_new (void);
BookwormAppCleanup* bookworm_app_cleanup_construct (GType object_type);
static void bookworm_app_cleanup_finalize (BookwormAppCleanup* obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


void bookworm_app_cleanup_cleanUp (void) {
#line 22 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	bookworm_app_cleanup_cleanBookCacheContent ();
#line 23 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	bookworm_app_cleanup_cleanBookCoverImages ();
#line 115 "cleanup.c"
}


static gchar* string_replace (const gchar* self, const gchar* old, const gchar* replacement) {
	gchar* result = NULL;
	GError * _inner_error_ = NULL;
#line 1380 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1380 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	g_return_val_if_fail (old != NULL, NULL);
#line 1380 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	g_return_val_if_fail (replacement != NULL, NULL);
#line 128 "cleanup.c"
	{
		GRegex* regex = NULL;
		const gchar* _tmp0_ = NULL;
		gchar* _tmp1_ = NULL;
		gchar* _tmp2_ = NULL;
		GRegex* _tmp3_ = NULL;
		GRegex* _tmp4_ = NULL;
		gchar* _tmp5_ = NULL;
		GRegex* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gchar* _tmp8_ = NULL;
		gchar* _tmp9_ = NULL;
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp0_ = old;
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp1_ = g_regex_escape_string (_tmp0_, -1);
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp2_ = _tmp1_;
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp3_ = g_regex_new (_tmp2_, 0, 0, &_inner_error_);
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp4_ = _tmp3_;
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_g_free0 (_tmp2_);
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		regex = _tmp4_;
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			if (_inner_error_->domain == G_REGEX_ERROR) {
#line 159 "cleanup.c"
				goto __catch21_g_regex_error;
			}
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			g_clear_error (&_inner_error_);
#line 1382 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			return NULL;
#line 168 "cleanup.c"
		}
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp6_ = regex;
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp7_ = replacement;
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp8_ = g_regex_replace_literal (_tmp6_, self, (gssize) -1, 0, _tmp7_, 0, &_inner_error_);
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp5_ = _tmp8_;
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			_g_regex_unref0 (regex);
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			if (_inner_error_->domain == G_REGEX_ERROR) {
#line 184 "cleanup.c"
				goto __catch21_g_regex_error;
			}
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			_g_regex_unref0 (regex);
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			g_clear_error (&_inner_error_);
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
			return NULL;
#line 195 "cleanup.c"
		}
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp9_ = _tmp5_;
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp5_ = NULL;
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		result = _tmp9_;
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_g_free0 (_tmp5_);
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_g_regex_unref0 (regex);
#line 1383 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		return result;
#line 209 "cleanup.c"
	}
	goto __finally21;
	__catch21_g_regex_error:
	{
		GError* e = NULL;
#line 1381 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		e = _inner_error_;
#line 1381 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_inner_error_ = NULL;
#line 1385 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		g_assert_not_reached ();
#line 1381 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_g_error_free0 (e);
#line 223 "cleanup.c"
	}
	__finally21:
#line 1381 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 1381 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 1381 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		g_clear_error (&_inner_error_);
#line 1381 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		return NULL;
#line 234 "cleanup.c"
	}
}


static gchar* string_strip (const gchar* self) {
	gchar* result = NULL;
	gchar* _result_ = NULL;
	gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
#line 1207 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, NULL);
#line 1208 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_tmp0_ = g_strdup (self);
#line 1208 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_result_ = _tmp0_;
#line 1209 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_tmp1_ = _result_;
#line 1209 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	g_strstrip (_tmp1_);
#line 1210 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	result = _result_;
#line 1210 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	return result;
#line 258 "cleanup.c"
}


static gint string_index_of (const gchar* self, const gchar* needle, gint start_index) {
	gint result = 0;
	gchar* _result_ = NULL;
	gint _tmp0_ = 0;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
#line 987 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	g_return_val_if_fail (self != NULL, 0);
#line 987 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	g_return_val_if_fail (needle != NULL, 0);
#line 988 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_tmp0_ = start_index;
#line 988 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_tmp1_ = needle;
#line 988 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_tmp2_ = strstr (((gchar*) self) + _tmp0_, (gchar*) _tmp1_);
#line 988 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_result_ = _tmp2_;
#line 990 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	_tmp3_ = _result_;
#line 990 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
	if (_tmp3_ != NULL) {
#line 285 "cleanup.c"
		gchar* _tmp4_ = NULL;
#line 991 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		_tmp4_ = _result_;
#line 991 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		result = (gint) (_tmp4_ - ((gchar*) self));
#line 991 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		return result;
#line 293 "cleanup.c"
	} else {
#line 993 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		result = -1;
#line 993 "/usr/share/vala-0.34/vapi/glib-2.0.vapi"
		return result;
#line 299 "cleanup.c"
	}
}


void bookworm_app_cleanup_cleanBookCacheContent (void) {
	gchar* cacheFolders = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	gchar* _tmp6_ = NULL;
	const gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	gchar* _tmp9_ = NULL;
	gchar* _tmp10_ = NULL;
	gchar** cacheFolderList = NULL;
	const gchar* _tmp11_ = NULL;
	gchar** _tmp12_ = NULL;
	gchar** _tmp13_ = NULL;
	gint cacheFolderList_length1 = 0;
	gint _cacheFolderList_size_ = 0;
	gboolean folderMatched = FALSE;
	gchar** _tmp14_ = NULL;
	gint _tmp14__length1 = 0;
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp0_ = bookworm_app_bookworm_bookworm_config_path;
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp1_ = g_strconcat ("ls -1 ", _tmp0_, NULL);
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp2_ = _tmp1_;
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp3_ = g_strconcat (_tmp2_, "/books/", NULL);
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp4_ = _tmp3_;
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp5_ = bookworm_app_utils_execute_sync_command (_tmp4_);
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp6_ = _tmp5_;
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (_tmp4_);
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (_tmp2_);
#line 28 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheFolders = _tmp6_;
#line 29 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp7_ = cacheFolders;
#line 29 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp8_ = string_replace (_tmp7_, "\r", "^^^");
#line 29 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp9_ = _tmp8_;
#line 29 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp10_ = string_replace (_tmp9_, "\n", "^^^");
#line 29 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (cacheFolders);
#line 29 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheFolders = _tmp10_;
#line 29 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (_tmp9_);
#line 30 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp11_ = cacheFolders;
#line 30 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp13_ = _tmp12_ = g_strsplit (_tmp11_, "^^^", 0);
#line 30 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheFolderList = _tmp13_;
#line 30 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheFolderList_length1 = _vala_array_length (_tmp12_);
#line 30 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_cacheFolderList_size_ = cacheFolderList_length1;
#line 32 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	folderMatched = FALSE;
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp14_ = cacheFolderList;
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp14__length1 = cacheFolderList_length1;
#line 376 "cleanup.c"
	{
		gchar** cacheFolder_collection = NULL;
		gint cacheFolder_collection_length1 = 0;
		gint _cacheFolder_collection_size_ = 0;
		gint cacheFolder_it = 0;
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		cacheFolder_collection = _tmp14_;
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		cacheFolder_collection_length1 = _tmp14__length1;
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		for (cacheFolder_it = 0; cacheFolder_it < _tmp14__length1; cacheFolder_it = cacheFolder_it + 1) {
#line 388 "cleanup.c"
			gchar* _tmp15_ = NULL;
			gchar* cacheFolder = NULL;
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
			_tmp15_ = g_strdup (cacheFolder_collection[cacheFolder_it]);
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
			cacheFolder = _tmp15_;
#line 395 "cleanup.c"
			{
				const gchar* _tmp16_ = NULL;
				gchar* _tmp17_ = NULL;
				gboolean _tmp18_ = FALSE;
				const gchar* _tmp19_ = NULL;
				gboolean _tmp44_ = FALSE;
#line 34 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				folderMatched = FALSE;
#line 35 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp16_ = cacheFolder;
#line 35 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp17_ = string_strip (_tmp16_);
#line 35 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_g_free0 (cacheFolder);
#line 35 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				cacheFolder = _tmp17_;
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp19_ = cacheFolder;
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				if (_tmp19_ == NULL) {
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp18_ = TRUE;
#line 418 "cleanup.c"
				} else {
					const gchar* _tmp20_ = NULL;
					gint _tmp21_ = 0;
					gint _tmp22_ = 0;
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp20_ = cacheFolder;
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp21_ = strlen (_tmp20_);
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp22_ = _tmp21_;
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp18_ = _tmp22_ < 1;
#line 431 "cleanup.c"
				}
#line 36 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				if (_tmp18_) {
#line 37 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					folderMatched = TRUE;
#line 437 "cleanup.c"
				}
				{
					GeeIterator* _book_it = NULL;
					GeeHashMap* _tmp23_ = NULL;
					GeeCollection* _tmp24_ = NULL;
					GeeCollection* _tmp25_ = NULL;
					GeeCollection* _tmp26_ = NULL;
					GeeIterator* _tmp27_ = NULL;
					GeeIterator* _tmp28_ = NULL;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp23_ = bookworm_app_bookworm_libraryViewMap;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp24_ = gee_abstract_map_get_values ((GeeAbstractMap*) _tmp23_);
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp25_ = _tmp24_;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp26_ = _tmp25_;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp27_ = gee_iterable_iterator ((GeeIterable*) _tmp26_);
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp28_ = _tmp27_;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_object_unref0 (_tmp26_);
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_book_it = _tmp28_;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					while (TRUE) {
#line 465 "cleanup.c"
						GeeIterator* _tmp29_ = NULL;
						gboolean _tmp30_ = FALSE;
						BookwormAppBook* book = NULL;
						GeeIterator* _tmp31_ = NULL;
						gpointer _tmp32_ = NULL;
						gboolean _tmp33_ = FALSE;
						const gchar* _tmp34_ = NULL;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp29_ = _book_it;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp30_ = gee_iterator_next (_tmp29_);
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						if (!_tmp30_) {
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							break;
#line 481 "cleanup.c"
						}
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp31_ = _book_it;
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp32_ = gee_iterator_get (_tmp31_);
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						book = (BookwormAppBook*) _tmp32_;
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp34_ = cacheFolder;
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						if (_tmp34_ != NULL) {
#line 493 "cleanup.c"
							const gchar* _tmp35_ = NULL;
							gint _tmp36_ = 0;
							gint _tmp37_ = 0;
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp35_ = cacheFolder;
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp36_ = strlen (_tmp35_);
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp37_ = _tmp36_;
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp33_ = _tmp37_ > 0;
#line 505 "cleanup.c"
						} else {
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp33_ = FALSE;
#line 509 "cleanup.c"
						}
#line 40 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						if (_tmp33_) {
#line 513 "cleanup.c"
							BookwormAppBook* _tmp38_ = NULL;
							gchar* _tmp39_ = NULL;
							gchar* _tmp40_ = NULL;
							const gchar* _tmp41_ = NULL;
							gint _tmp42_ = 0;
							gboolean _tmp43_ = FALSE;
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp38_ = book;
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp39_ = bookworm_app_book_getBookExtractionLocation (G_TYPE_CHECK_INSTANCE_CAST (_tmp38_, BOOKWORM_APP_TYPE_BOOK, BookwormAppBook));
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp40_ = _tmp39_;
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp41_ = cacheFolder;
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp42_ = string_index_of (_tmp40_, _tmp41_, 0);
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp43_ = _tmp42_ != -1;
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_g_free0 (_tmp40_);
#line 42 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							if (_tmp43_) {
#line 43 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
								folderMatched = TRUE;
#line 44 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
								_bookworm_app_book_unref0 (book);
#line 44 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
								break;
#line 542 "cleanup.c"
							}
						}
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_bookworm_app_book_unref0 (book);
#line 547 "cleanup.c"
					}
#line 39 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_object_unref0 (_book_it);
#line 551 "cleanup.c"
				}
#line 48 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp44_ = folderMatched;
#line 48 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				if (!_tmp44_) {
#line 557 "cleanup.c"
					const gchar* _tmp45_ = NULL;
					gchar* _tmp46_ = NULL;
					gchar* _tmp47_ = NULL;
					gchar* _tmp48_ = NULL;
					gchar* _tmp49_ = NULL;
					const gchar* _tmp50_ = NULL;
					gchar* _tmp51_ = NULL;
					gchar* _tmp52_ = NULL;
					gchar* _tmp53_ = NULL;
					gchar* _tmp54_ = NULL;
					gchar* _tmp55_ = NULL;
					gchar* _tmp56_ = NULL;
					const gchar* _tmp57_ = NULL;
					gchar* _tmp58_ = NULL;
					gchar* _tmp59_ = NULL;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp45_ = bookworm_app_bookworm_bookworm_config_path;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp46_ = g_strconcat ("rm -Rf \"", _tmp45_, NULL);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp47_ = _tmp46_;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp48_ = g_strconcat (_tmp47_, "/books/", NULL);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp49_ = _tmp48_;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp50_ = cacheFolder;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp51_ = g_strconcat (_tmp49_, _tmp50_, NULL);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp52_ = _tmp51_;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp53_ = g_strconcat (_tmp52_, "\"", NULL);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp54_ = _tmp53_;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp55_ = bookworm_app_utils_execute_sync_command (_tmp54_);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp56_ = _tmp55_;
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp56_);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp54_);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp52_);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp49_);
#line 50 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp47_);
#line 51 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp57_ = cacheFolder;
#line 51 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp58_ = g_strconcat ("Cache Folder deleted:", _tmp57_, NULL);
#line 51 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp59_ = _tmp58_;
#line 51 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					g_debug ("cleanup.vala:51: %s", _tmp59_);
#line 51 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp59_);
#line 617 "cleanup.c"
				}
#line 33 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_g_free0 (cacheFolder);
#line 621 "cleanup.c"
			}
		}
	}
#line 26 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheFolderList = (_vala_array_free (cacheFolderList, cacheFolderList_length1, (GDestroyNotify) g_free), NULL);
#line 26 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (cacheFolders);
#line 629 "cleanup.c"
}


void bookworm_app_cleanup_cleanBookCoverImages (void) {
	gchar* cacheImages = NULL;
	const gchar* _tmp0_ = NULL;
	gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	gchar* _tmp6_ = NULL;
	const gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	gchar* _tmp9_ = NULL;
	gchar* _tmp10_ = NULL;
	gchar** cacheImageList = NULL;
	const gchar* _tmp11_ = NULL;
	gchar** _tmp12_ = NULL;
	gchar** _tmp13_ = NULL;
	gint cacheImageList_length1 = 0;
	gint _cacheImageList_size_ = 0;
	gboolean imageMatched = FALSE;
	gchar** _tmp14_ = NULL;
	gint _tmp14__length1 = 0;
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp0_ = bookworm_app_bookworm_bookworm_config_path;
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp1_ = g_strconcat ("ls -1 ", _tmp0_, NULL);
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp2_ = _tmp1_;
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp3_ = g_strconcat (_tmp2_, "/covers/", NULL);
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp4_ = _tmp3_;
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp5_ = bookworm_app_utils_execute_sync_command (_tmp4_);
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp6_ = _tmp5_;
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (_tmp4_);
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (_tmp2_);
#line 58 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheImages = _tmp6_;
#line 59 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp7_ = cacheImages;
#line 59 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp8_ = string_replace (_tmp7_, "\r", "^^^");
#line 59 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp9_ = _tmp8_;
#line 59 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp10_ = string_replace (_tmp9_, "\n", "^^^");
#line 59 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (cacheImages);
#line 59 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheImages = _tmp10_;
#line 59 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (_tmp9_);
#line 60 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp11_ = cacheImages;
#line 60 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp13_ = _tmp12_ = g_strsplit (_tmp11_, "^^^", 0);
#line 60 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheImageList = _tmp13_;
#line 60 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheImageList_length1 = _vala_array_length (_tmp12_);
#line 60 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_cacheImageList_size_ = cacheImageList_length1;
#line 62 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	imageMatched = FALSE;
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp14_ = cacheImageList;
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_tmp14__length1 = cacheImageList_length1;
#line 705 "cleanup.c"
	{
		gchar** cacheImage_collection = NULL;
		gint cacheImage_collection_length1 = 0;
		gint _cacheImage_collection_size_ = 0;
		gint cacheImage_it = 0;
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		cacheImage_collection = _tmp14_;
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		cacheImage_collection_length1 = _tmp14__length1;
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		for (cacheImage_it = 0; cacheImage_it < _tmp14__length1; cacheImage_it = cacheImage_it + 1) {
#line 717 "cleanup.c"
			gchar* _tmp15_ = NULL;
			gchar* cacheImage = NULL;
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
			_tmp15_ = g_strdup (cacheImage_collection[cacheImage_it]);
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
			cacheImage = _tmp15_;
#line 724 "cleanup.c"
			{
				const gchar* _tmp16_ = NULL;
				gchar* _tmp17_ = NULL;
				gboolean _tmp18_ = FALSE;
				const gchar* _tmp19_ = NULL;
				gboolean _tmp44_ = FALSE;
#line 64 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				imageMatched = FALSE;
#line 65 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp16_ = cacheImage;
#line 65 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp17_ = string_strip (_tmp16_);
#line 65 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_g_free0 (cacheImage);
#line 65 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				cacheImage = _tmp17_;
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp19_ = cacheImage;
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				if (_tmp19_ == NULL) {
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp18_ = TRUE;
#line 747 "cleanup.c"
				} else {
					const gchar* _tmp20_ = NULL;
					gint _tmp21_ = 0;
					gint _tmp22_ = 0;
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp20_ = cacheImage;
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp21_ = strlen (_tmp20_);
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp22_ = _tmp21_;
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp18_ = _tmp22_ < 1;
#line 760 "cleanup.c"
				}
#line 66 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				if (_tmp18_) {
#line 67 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					imageMatched = TRUE;
#line 766 "cleanup.c"
				}
				{
					GeeIterator* _book_it = NULL;
					GeeHashMap* _tmp23_ = NULL;
					GeeCollection* _tmp24_ = NULL;
					GeeCollection* _tmp25_ = NULL;
					GeeCollection* _tmp26_ = NULL;
					GeeIterator* _tmp27_ = NULL;
					GeeIterator* _tmp28_ = NULL;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp23_ = bookworm_app_bookworm_libraryViewMap;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp24_ = gee_abstract_map_get_values ((GeeAbstractMap*) _tmp23_);
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp25_ = _tmp24_;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp26_ = _tmp25_;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp27_ = gee_iterable_iterator ((GeeIterable*) _tmp26_);
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp28_ = _tmp27_;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_object_unref0 (_tmp26_);
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_book_it = _tmp28_;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					while (TRUE) {
#line 794 "cleanup.c"
						GeeIterator* _tmp29_ = NULL;
						gboolean _tmp30_ = FALSE;
						BookwormAppBook* book = NULL;
						GeeIterator* _tmp31_ = NULL;
						gpointer _tmp32_ = NULL;
						gboolean _tmp33_ = FALSE;
						const gchar* _tmp34_ = NULL;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp29_ = _book_it;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp30_ = gee_iterator_next (_tmp29_);
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						if (!_tmp30_) {
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							break;
#line 810 "cleanup.c"
						}
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp31_ = _book_it;
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp32_ = gee_iterator_get (_tmp31_);
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						book = (BookwormAppBook*) _tmp32_;
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_tmp34_ = cacheImage;
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						if (_tmp34_ != NULL) {
#line 822 "cleanup.c"
							const gchar* _tmp35_ = NULL;
							gint _tmp36_ = 0;
							gint _tmp37_ = 0;
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp35_ = cacheImage;
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp36_ = strlen (_tmp35_);
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp37_ = _tmp36_;
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp33_ = _tmp37_ > 0;
#line 834 "cleanup.c"
						} else {
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp33_ = FALSE;
#line 838 "cleanup.c"
						}
#line 70 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						if (_tmp33_) {
#line 842 "cleanup.c"
							BookwormAppBook* _tmp38_ = NULL;
							gchar* _tmp39_ = NULL;
							gchar* _tmp40_ = NULL;
							const gchar* _tmp41_ = NULL;
							gint _tmp42_ = 0;
							gboolean _tmp43_ = FALSE;
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp38_ = book;
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp39_ = bookworm_app_book_getBookCoverLocation (G_TYPE_CHECK_INSTANCE_CAST (_tmp38_, BOOKWORM_APP_TYPE_BOOK, BookwormAppBook));
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp40_ = _tmp39_;
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp41_ = cacheImage;
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp42_ = string_index_of (_tmp40_, _tmp41_, 0);
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_tmp43_ = _tmp42_ != -1;
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							_g_free0 (_tmp40_);
#line 72 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
							if (_tmp43_) {
#line 73 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
								imageMatched = TRUE;
#line 74 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
								_bookworm_app_book_unref0 (book);
#line 74 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
								break;
#line 871 "cleanup.c"
							}
						}
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
						_bookworm_app_book_unref0 (book);
#line 876 "cleanup.c"
					}
#line 69 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_object_unref0 (_book_it);
#line 880 "cleanup.c"
				}
#line 78 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_tmp44_ = imageMatched;
#line 78 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				if (!_tmp44_) {
#line 886 "cleanup.c"
					const gchar* _tmp45_ = NULL;
					gchar* _tmp46_ = NULL;
					gchar* _tmp47_ = NULL;
					gchar* _tmp48_ = NULL;
					gchar* _tmp49_ = NULL;
					const gchar* _tmp50_ = NULL;
					gchar* _tmp51_ = NULL;
					gchar* _tmp52_ = NULL;
					gchar* _tmp53_ = NULL;
					gchar* _tmp54_ = NULL;
					gchar* _tmp55_ = NULL;
					gchar* _tmp56_ = NULL;
					const gchar* _tmp57_ = NULL;
					gchar* _tmp58_ = NULL;
					gchar* _tmp59_ = NULL;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp45_ = bookworm_app_bookworm_bookworm_config_path;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp46_ = g_strconcat ("rm -f \"", _tmp45_, NULL);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp47_ = _tmp46_;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp48_ = g_strconcat (_tmp47_, "/covers/", NULL);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp49_ = _tmp48_;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp50_ = cacheImage;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp51_ = g_strconcat (_tmp49_, _tmp50_, NULL);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp52_ = _tmp51_;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp53_ = g_strconcat (_tmp52_, "\"", NULL);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp54_ = _tmp53_;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp55_ = bookworm_app_utils_execute_sync_command (_tmp54_);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp56_ = _tmp55_;
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp56_);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp54_);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp52_);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp49_);
#line 80 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp47_);
#line 81 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp57_ = cacheImage;
#line 81 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp58_ = g_strconcat ("Cache Image deleted:", _tmp57_, NULL);
#line 81 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_tmp59_ = _tmp58_;
#line 81 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					g_debug ("cleanup.vala:81: %s", _tmp59_);
#line 81 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
					_g_free0 (_tmp59_);
#line 946 "cleanup.c"
				}
#line 63 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
				_g_free0 (cacheImage);
#line 950 "cleanup.c"
			}
		}
	}
#line 56 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	cacheImageList = (_vala_array_free (cacheImageList, cacheImageList_length1, (GDestroyNotify) g_free), NULL);
#line 56 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	_g_free0 (cacheImages);
#line 958 "cleanup.c"
}


BookwormAppCleanup* bookworm_app_cleanup_construct (GType object_type) {
	BookwormAppCleanup* self = NULL;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	self = (BookwormAppCleanup*) g_type_create_instance (object_type);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return self;
#line 968 "cleanup.c"
}


BookwormAppCleanup* bookworm_app_cleanup_new (void) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return bookworm_app_cleanup_construct (BOOKWORM_APP_TYPE_CLEANUP);
#line 975 "cleanup.c"
}


static void bookworm_app_value_cleanup_init (GValue* value) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	value->data[0].v_pointer = NULL;
#line 982 "cleanup.c"
}


static void bookworm_app_value_cleanup_free_value (GValue* value) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (value->data[0].v_pointer) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		bookworm_app_cleanup_unref (value->data[0].v_pointer);
#line 991 "cleanup.c"
	}
}


static void bookworm_app_value_cleanup_copy_value (const GValue* src_value, GValue* dest_value) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (src_value->data[0].v_pointer) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		dest_value->data[0].v_pointer = bookworm_app_cleanup_ref (src_value->data[0].v_pointer);
#line 1001 "cleanup.c"
	} else {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		dest_value->data[0].v_pointer = NULL;
#line 1005 "cleanup.c"
	}
}


static gpointer bookworm_app_value_cleanup_peek_pointer (const GValue* value) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return value->data[0].v_pointer;
#line 1013 "cleanup.c"
}


static gchar* bookworm_app_value_cleanup_collect_value (GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (collect_values[0].v_pointer) {
#line 1020 "cleanup.c"
		BookwormAppCleanup* object;
		object = collect_values[0].v_pointer;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		if (object->parent_instance.g_class == NULL) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
			return g_strconcat ("invalid unclassed object pointer for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 1027 "cleanup.c"
		} else if (!g_value_type_compatible (G_TYPE_FROM_INSTANCE (object), G_VALUE_TYPE (value))) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
			return g_strconcat ("invalid object type `", g_type_name (G_TYPE_FROM_INSTANCE (object)), "' for value type `", G_VALUE_TYPE_NAME (value), "'", NULL);
#line 1031 "cleanup.c"
		}
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		value->data[0].v_pointer = bookworm_app_cleanup_ref (object);
#line 1035 "cleanup.c"
	} else {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		value->data[0].v_pointer = NULL;
#line 1039 "cleanup.c"
	}
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return NULL;
#line 1043 "cleanup.c"
}


static gchar* bookworm_app_value_cleanup_lcopy_value (const GValue* value, guint n_collect_values, GTypeCValue* collect_values, guint collect_flags) {
	BookwormAppCleanup** object_p;
	object_p = collect_values[0].v_pointer;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (!object_p) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		return g_strdup_printf ("value location for `%s' passed as NULL", G_VALUE_TYPE_NAME (value));
#line 1054 "cleanup.c"
	}
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (!value->data[0].v_pointer) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		*object_p = NULL;
#line 1060 "cleanup.c"
	} else if (collect_flags & G_VALUE_NOCOPY_CONTENTS) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		*object_p = value->data[0].v_pointer;
#line 1064 "cleanup.c"
	} else {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		*object_p = bookworm_app_cleanup_ref (value->data[0].v_pointer);
#line 1068 "cleanup.c"
	}
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return NULL;
#line 1072 "cleanup.c"
}


GParamSpec* bookworm_app_param_spec_cleanup (const gchar* name, const gchar* nick, const gchar* blurb, GType object_type, GParamFlags flags) {
	BookwormAppParamSpecCleanup* spec;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	g_return_val_if_fail (g_type_is_a (object_type, BOOKWORM_APP_TYPE_CLEANUP), NULL);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	spec = g_param_spec_internal (G_TYPE_PARAM_OBJECT, name, nick, blurb, flags);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	G_PARAM_SPEC (spec)->value_type = object_type;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return G_PARAM_SPEC (spec);
#line 1086 "cleanup.c"
}


gpointer bookworm_app_value_get_cleanup (const GValue* value) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	g_return_val_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, BOOKWORM_APP_TYPE_CLEANUP), NULL);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return value->data[0].v_pointer;
#line 1095 "cleanup.c"
}


void bookworm_app_value_set_cleanup (GValue* value, gpointer v_object) {
	BookwormAppCleanup* old;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, BOOKWORM_APP_TYPE_CLEANUP));
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	old = value->data[0].v_pointer;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (v_object) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, BOOKWORM_APP_TYPE_CLEANUP));
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		value->data[0].v_pointer = v_object;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		bookworm_app_cleanup_ref (value->data[0].v_pointer);
#line 1115 "cleanup.c"
	} else {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		value->data[0].v_pointer = NULL;
#line 1119 "cleanup.c"
	}
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (old) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		bookworm_app_cleanup_unref (old);
#line 1125 "cleanup.c"
	}
}


void bookworm_app_value_take_cleanup (GValue* value, gpointer v_object) {
	BookwormAppCleanup* old;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	g_return_if_fail (G_TYPE_CHECK_VALUE_TYPE (value, BOOKWORM_APP_TYPE_CLEANUP));
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	old = value->data[0].v_pointer;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (v_object) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		g_return_if_fail (G_TYPE_CHECK_INSTANCE_TYPE (v_object, BOOKWORM_APP_TYPE_CLEANUP));
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		g_return_if_fail (g_value_type_compatible (G_TYPE_FROM_INSTANCE (v_object), G_VALUE_TYPE (value)));
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		value->data[0].v_pointer = v_object;
#line 1144 "cleanup.c"
	} else {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		value->data[0].v_pointer = NULL;
#line 1148 "cleanup.c"
	}
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (old) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		bookworm_app_cleanup_unref (old);
#line 1154 "cleanup.c"
	}
}


static void bookworm_app_cleanup_class_init (BookwormAppCleanupClass * klass) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	bookworm_app_cleanup_parent_class = g_type_class_peek_parent (klass);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	((BookwormAppCleanupClass *) klass)->finalize = bookworm_app_cleanup_finalize;
#line 1164 "cleanup.c"
}


static void bookworm_app_cleanup_instance_init (BookwormAppCleanup * self) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	self->ref_count = 1;
#line 1171 "cleanup.c"
}


static void bookworm_app_cleanup_finalize (BookwormAppCleanup* obj) {
	BookwormAppCleanup * self;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, BOOKWORM_APP_TYPE_CLEANUP, BookwormAppCleanup);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	g_signal_handlers_destroy (self);
#line 1181 "cleanup.c"
}


GType bookworm_app_cleanup_get_type (void) {
	static volatile gsize bookworm_app_cleanup_type_id__volatile = 0;
	if (g_once_init_enter (&bookworm_app_cleanup_type_id__volatile)) {
		static const GTypeValueTable g_define_type_value_table = { bookworm_app_value_cleanup_init, bookworm_app_value_cleanup_free_value, bookworm_app_value_cleanup_copy_value, bookworm_app_value_cleanup_peek_pointer, "p", bookworm_app_value_cleanup_collect_value, "p", bookworm_app_value_cleanup_lcopy_value };
		static const GTypeInfo g_define_type_info = { sizeof (BookwormAppCleanupClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) bookworm_app_cleanup_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (BookwormAppCleanup), 0, (GInstanceInitFunc) bookworm_app_cleanup_instance_init, &g_define_type_value_table };
		static const GTypeFundamentalInfo g_define_type_fundamental_info = { (G_TYPE_FLAG_CLASSED | G_TYPE_FLAG_INSTANTIATABLE | G_TYPE_FLAG_DERIVABLE | G_TYPE_FLAG_DEEP_DERIVABLE) };
		GType bookworm_app_cleanup_type_id;
		bookworm_app_cleanup_type_id = g_type_register_fundamental (g_type_fundamental_next (), "BookwormAppCleanup", &g_define_type_info, &g_define_type_fundamental_info, 0);
		g_once_init_leave (&bookworm_app_cleanup_type_id__volatile, bookworm_app_cleanup_type_id);
	}
	return bookworm_app_cleanup_type_id__volatile;
}


gpointer bookworm_app_cleanup_ref (gpointer instance) {
	BookwormAppCleanup* self;
	self = instance;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	g_atomic_int_inc (&self->ref_count);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	return instance;
#line 1206 "cleanup.c"
}


void bookworm_app_cleanup_unref (gpointer instance) {
	BookwormAppCleanup* self;
	self = instance;
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
	if (g_atomic_int_dec_and_test (&self->ref_count)) {
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		BOOKWORM_APP_CLEANUP_GET_CLASS (self)->finalize (self);
#line 19 "/home/sid/Documents/Projects/bookworm/dev/src/cleanup.vala"
		g_type_free_instance ((GTypeInstance *) self);
#line 1219 "cleanup.c"
	}
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



